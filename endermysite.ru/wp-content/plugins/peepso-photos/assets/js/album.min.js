!function(s,e){function a(){this.ajax={}}var u,t;e.album=(u=s,(t=e).npm.objectAssign(a.prototype,{edit_name:function(e,a,s){var i,t,n,o=u(s).closest(".ps-js-album-name"),c=o.find(".ps-js-album-name-text"),d=o.find(".ps-js-album-name-editor"),l=o.find(".ps-js-album-name-trigger");d.is(":visible")||(c.hide(),l.hide(),d.show(),t=d.find(".ps-js-submit"),(i=d.find("input")).data("original-value",n=i.val()),i.focus().val("").val(n),d.off("click input"),d.on("click",".ps-js-cancel",function(){i.val(n),d.off("click").hide(),c.show(),l.show()}),d.on("click",".ps-js-submit",u.proxy(function(s){this.save_name(e,a,i.val(),s.currentTarget)},this)),d.on("input","input",_.throttle(function(s){u.trim(s.target.value)?t.removeAttr("disabled"):t.attr("disabled","disabled")},500)),i.trigger("input"))},save_name:function(s,e,o,c){var d,l="save_name";this.ajax[l]||(this.ajax[l]=!0,o=u.trim(o),(d=u(c).find(".ps-js-loading")).show(),t.postJson("photosajax.set_album_name",{album_id:s,user_id:e,name:o,_wpnonce:psdata_photos_album.nonce_set_album_name},u.proxy(function(s){var e=u(c).closest(".ps-js-album-name"),a=e.find(".ps-js-album-name-text"),i=e.find(".ps-js-album-name-editor"),t=e.find(".ps-js-album-name-trigger"),n=i.find("input");this.ajax[l]=!1,d.hide(),s.success?(n.val(o),i.off("click").hide(),a.text(o).show(),t.show()):psmessage.show("",s.errors[0]).fade_out(psmessage.fade_time)},this)))},edit_desc:function(e,a,i,s){var t,n,o=u(s).closest(".ps-js-album-desc"),c=o.find(".ps-js-album-desc-text"),d=o.find(".ps-js-album-desc-placeholder"),l=o.find(".ps-js-album-desc-editor");l.is(":visible")||(c.hide(),d.hide(),l.show(),(t=l.find("textarea")).data("original-value",n=t.val()),t.focus().val("").val(n),l.off("click"),l.on("click",".ps-js-cancel",function(){t.val(n),l.off("click").hide(),u.trim(n)?(c.show(),d.hide()):(c.hide(),d.show())}),l.on("click",".ps-js-submit",u.proxy(function(s){this.save_desc(e,a,i,t.val(),s.currentTarget)},this)))},save_desc:function(s,e,a,o,c){var d,l="save_desc";this.ajax[l]||(this.ajax[l]=!0,o=u.trim(o),(d=u(c).find(".ps-js-loading")).show(),t.postJson("photosajax.set_album_description",{album_id:s,user_id:e,owner_id:a,description:o,_wpnonce:psdata_photos_album.nonce_set_album_description},u.proxy(function(s){var e=u(c).closest(".ps-js-album-desc"),a=e.find(".ps-js-album-desc-text"),i=e.find(".ps-js-album-desc-placeholder"),t=e.find(".ps-js-album-desc-editor"),n=t.find("textarea");this.ajax[l]=!1,d.hide(),s.success?(n.val(o),t.off("click").hide(),o?(a.text(o).show(),i.hide()):(a.text(o).hide(),i.show())):psmessage.show("",s.errors[0]).fade_out(psmessage.fade_time)},this)))},change_acc:function(s,e,a,i){t.postJson("photosajax.set_album_access",{album_id:s,user_id:e,acc:a,_wpnonce:psdata_photos_album.nonce_set_album_access},u.proxy(function(s){s.success||psmessage.show("",s.errors[0]).fade_out(psmessage.fade_time)},this))}}),new a)}(jQuery,peepso);